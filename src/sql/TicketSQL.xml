<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sqlMap PUBLIC '-//ibatis.apache.org//DTD Sql Map 2.0//EN' 'http://ibatis.apache.org/dtd/sql-map-2.dtd'>
<sqlMap namespace="ticket">
	<typeAlias alias="Ticket" type="rose.ticket.bean.Ticket"/>
	
	<select id="getAllTicketList" resultClass="Ticket">
		SELECT * FROM TICKET_INFO
	</select>
	
	<select id="getTicketList" resultClass="Ticket" parameterClass="int">
		SELECT * FROM TICKET_INFO WHERE MEMBER_ID = #member_id#
	</select>
	
	<select id="getTicket" resultClass="Ticket" parameterClass="String">
		SELECT * FROM TICKET_INFO WHERE NO = #no#
	</select>
	
	<update id="cancelTicket" parameterMap="String">	
		UPDATE TICKET_INFO SET ISCANCEL = #isCancel#, CANCEL_DATE = SYSOUT WHERE NO = #no#  
	</update>
	
	<insert id="buyTicket" parameterMap="ticket"> 
		INSERT INTO TICKET_INFO VALUES(TICKET_ID_SEQ.NEXTVAL,#NO#,#SEAT_ID#,#SCREEN_ID#,#MEMBER_ID#,#MCARD_ID#,#COUPON_ID#,#MOVIE#,#THEATER#,#SCREEN#,#TICKETDATE#,#COUNT#,#SEAT1#,#SEAT2#,#SEAT3#,#SEAT4#,#SEAT5#,#SEAT6#,#SEAT7#,#SEAT8#,#BUYDATE#,#BUYSUM#,#BUYTYPE#,#PHONE#,#ISCANCEL#,#CANCELDATE#)
	</insert>
	
</sqlMap>